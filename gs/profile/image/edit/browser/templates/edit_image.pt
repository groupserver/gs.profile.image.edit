<html metal:use-macro="context/@@groupserver_layout/page">
  <head>
    <title metal:fill-slot="title">
      <span tal:replace="view/label"/>:
      <span tal:replace="view/userInfo/name"/>:
      <span tal:replace="view/siteInfo/name"/>
    </title>
  </head>
  <body>
    <div metal:fill-slot="messages" tal:condition="view/status" 
      class="message-error"
      tal:define="e view/errors"
      tal:attributes="class python:e and 'message-error' or 'message-result'">
      <p class="form-status" tal:content="structure view/status"/>
      <dl tal:condition="view/errors">
        <tal:block repeat="widget view/widgets">
          <tal:block tal:condition="widget/error">
            <dt tal:content="widget/label">Widget Name</dt>
            <dd class="error" 
              tal:content="structure widget/error">Error message</dd>
          </tal:block>
        </tal:block>
      </dl>
    </div>
    <tal:block metal:fill-slot="contextnavigation">
      <span 
        tal:replace="structure provider:groupserver.ProfileContextMenu">
        Context Menu
      </span>
    </tal:block>
    <tal:block metal:fill-slot="body">
      <form enctype="multipart/form-data"  method="post" action="."
        tal:attributes="action request/URL" id="change-image">
        
        <h1 tal:content="view/label">Edit Image</h1>
        <div tal:define="user view/context;
          showImageRegardlessOfUserSetting python:True"
          tal:replace="structure provider:groupserver.UserImage" />
        <p>To change your image click 
          <samp class="button">Browse</samp>, select an image, and
          click <samp class="button">Change</samp>.</p>
        <p>
          Your image appears on your profile and on your posts.
          It is visible to members of that groups that you are in,
          people who are not logged in, and search engines.
          It must be in JPEG-image (<code>.jpg</code>), and is 
          normally a photo of you.
          When shown on 
          <span tal:content="view/siteInfo/name" 
            class="site">this site</span>
          it will be automatically reduced in size (scaled down) so
          it is no wider than 81 pixels, and no taller than 102 
          pixels.</p>
        <p>
          To hide your image, so others cannot see it, 
          deselect the  
          <samp class="field">Show Image</samp> option.
        </p>
        <div style="clear: both;"/>
        <tal:block define="widgets view/widgets">
          <tal:block replace="structure provider:groupserver.FormWidgets"/>
        </tal:block>
        <div class="buttons" tal:condition="view/availableActions">
          <tal:block repeat="action view/actions">
            <div class="formelementbutton">
              <span tal:replace="structure action/render">Button</span>
            </div>
          </tal:block>
        </div><!--buttons-->
      </form>
    </tal:block>
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript"
        src="/++resource++check_required-20071214.js">&#160;</script>
      <script type="text/javascript"
        tal:define="widgets view/widgets; 
          button string:#form\\.actions\\.change"
        tal:content="provider:groupserver.RequiredWidgetsJavaScript">
        alert("I have not been replaced.");
      </script>
      <script type="text/javascript"
        src="/++resource++popup_help-20071218.js">&#160;</script>
      <script type="text/javascript">
        jQuery.noConflict()
        jQuery(document).ready( function () {
            GSPopupFormHelp.init('#change-image');
        });
      </script>
    </tal:block>
  </body>
</html>

